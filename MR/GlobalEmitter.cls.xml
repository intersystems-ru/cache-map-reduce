<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25">
<Class name="MR.GlobalEmitter">
<Super>%RegisteredObject</Super>
<TimeCreated>63660,85075.197628</TimeCreated>

<Property name="Name">
<Description>
global name serving as data channel</Description>
<Type>%String</Type>
</Property>

<Method name="%OnNew">
<FormalSpec>initval:%String</FormalSpec>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
    $$$ThrowOnError($length(initval)>0)
    set ..Name = initval ; FIXME - valid global name
    quit $$$OK
]]></Implementation>
</Method>

<Method name="Emit">
<FormalSpec>ListBuild:%String</FormalSpec>
<Implementation><![CDATA[
    $$$ThrowOnError($listvalid(ListBuild))
    #dim name As %String = ..Name
    set @name@($seq(@name)) = ListBuild
]]></Implementation>
</Method>

<Method name="Fetch">
<ReturnType>%String</ReturnType>
<Implementation><![CDATA[
    #dim name As %String = ..Name
    #dim value As %String
    #dim index As %String = $order(@name@(""),1,value)
    if index'="" {
        kill @name@(index)
        quit value
    } else {
        kill @name
        quit ""
    }
]]></Implementation>
</Method>
</Class>
</Export>
